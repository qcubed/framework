var $j=jQuery.noConflict();$j.fn.extend({wait:function(b,a){b=b||1000;a=a||"fx";return this.queue(a,function(){var c=this;setTimeout(function(){$j(c).dequeue()},b)})}});$j.ajaxQueue=function(a){if(typeof $j.ajaxq=="undefined"){$j.ajax(a)}else{$j.ajaxq("qcu.be",a)}};$j.ajaxSync=function(c){var a=$j.ajaxSync.fn,b=$j.ajaxSync.data,d=a.length;a[d]={error:c.error,success:c.success,complete:c.complete,done:false};b[d]={error:[],success:[],complete:[]};c.error=function(){b[d].error=arguments};c.success=function(){b[d].success=arguments};c.complete=function(){b[d].complete=arguments;a[d].done=true;if(d==0||!a[d-1]){for(var e=d;e<a.length&&a[e].done;e++){if(a[e].error){a[e].error.apply($j,b[e].error)}if(a[e].success){a[e].success.apply($j,b[e].success)}if(a[e].complete){a[e].complete.apply($j,b[e].complete)}a[e]=null;b[e]=null}}};return $j.ajax(c)};$j.ajaxSync.fn=[];$j.ajaxSync.data=[];var qcubed={recordControlModification:function(c,a,b){if(!qcubed.controlModifications[c]){qcubed.controlModifications[c]=new Object}qcubed.controlModifications[c][a]=b},postBack:function(c,e,b,a){var c=$j("#Qform__FormId").attr("value");var d=$j("#"+c);if(a&&(typeof a!=="string")){a=$j.param({Qform__FormParameter:a});d.append('<input type="hidden" name="Qform__FormParameterType" value="obj">')}$j("#Qform__FormControl").val(e);$j("#Qform__FormEvent").val(b);$j("#Qform__FormParameter").val(a);$j("#Qform__FormCallType").val("Server");$j("#Qform__FormUpdates").val(this.formUpdates());$j("#Qform__FormCheckableControls").val(this.formCheckableControls(c,"Server"));d.trigger("submit")},formUpdates:function(){var b="";for(var c in qcubed.controlModifications){for(var a in qcubed.controlModifications[c]){b+=c+" "+a+" "+qcubed.controlModifications[c][a]+"\n"}}qcubed.controlModifications=new Object;return b},formCheckableControls:function(d,b){var c=$j("#"+d).find("input,select,textarea");var a="";c.each(function(f){if((($j(this).attr("type")=="checkbox")||($j(this).attr("type")=="radio"))&&((b=="Ajax")||(!$j(this).attr("disabled")))){var e=$j(this).attr("id");if(e.indexOf("_")>=0){if(e.indexOf("_0")>=0){a+=" "+e.substring(0,e.length-2)}}else{a+=" "+e}}});if(a.length>0){return a.substring(1)}else{return""}},postAjax:function(strForm,strControl,strEvent,mixParameter,strWaitIconControlId){var objForm=$j("#"+strForm);var strFormAction=objForm.attr("action");var objFormElements=$j("#"+strForm).find("input,select,textarea");var strPostData="";if(mixParameter&&(typeof mixParameter!=="string")){strPostData=$j.param({Qform__FormParameter:mixParameter});objFormElements=objFormElements.not("#Qform__FormParameter")}else{$j("#Qform__FormParameter").val(mixParameter)}$j("#Qform__FormControl").val(strControl);$j("#Qform__FormEvent").val(strEvent);$j("#Qform__FormCallType").val("Ajax");$j("#Qform__FormUpdates").val(this.formUpdates());$j("#Qform__FormCheckableControls").val(this.formCheckableControls(strForm,"Ajax"));objFormElements.each(function(){var strType=$j(this).attr("type");if(strType==undefined){strType=this.type}var strControlId=$j(this).attr("id");switch(strType){case"checkbox":case"radio":if($j(this).attr("checked")){var strTestName;var bracketIndex=$j(this).attr("name").indexOf("[");if(bracketIndex>0){strTestName=$j(this).attr("name").substring(0,bracketIndex)+"_"}else{strTestName=$j(this).attr("name")+"_"}if(strControlId.substring(0,strTestName.length)==strTestName){strPostData+="&"+$j(this).attr("name")+"="+strControlId.substring(strTestName.length)}else{strPostData+="&"+strControlId+"="+$j(this).val()}}break;case"select-multiple":var blnOneSelected=false;$j(this).find(":selected").each(function(i){strPostData+="&"+$j(this).parents("select").attr("name")+"=";strPostData+=$j(this).val()});break;default:strPostData+="&"+strControlId+"=";var strPostValue=$j(this).val();if(strPostValue){strPostValue=strPostValue.replace(/\%/g,"%25");strPostValue=strPostValue.replace(/&/g,escape("&"));strPostValue=strPostValue.replace(/\+/g,"%2B")}strPostData+=strPostValue;break}});if(strWaitIconControlId){this.objAjaxWaitIcon=this.getWrapper(strWaitIconControlId);if(this.objAjaxWaitIcon){this.objAjaxWaitIcon.style.display="inline"}}$j.ajaxQueue({url:strFormAction,type:"POST",data:strPostData,error:function(XMLHttpRequest,textStatus,errorThrown){var result=XMLHttpRequest.responseText;if(XMLHttpRequest.status!=0||result.length>0){if(result.substr(0,6)=="<html>"){alert("An error occurred during AJAX Response parsing.\r\n\r\nThe error response will appear in a new popup.");var objErrorWindow=window.open("about:blank","qcubed_error","menubar=no,toolbar=no,location=no,status=no,scrollbars=yes,resizable=yes,width=1000,height=700,left=50,top=50");objErrorWindow.focus();objErrorWindow.document.write(result);return false}else{var dialog=$j('<div id="Qcubed_AJAX_Error"></div>').html(result).dialog({modal:true,height:200,width:400,autoOpen:true,title:"An Error Occurred",buttons:{Ok:function(){$j(this).dialog("close")}}});dialog.dialog("open");return false}}},success:function(xml){$j(xml).find("control").each(function(){var strControlId="#"+$j(this).attr("id");var strControlHtml=$j(this).text();if(strControlId=="#Qform__FormState"){$j(strControlId).val(strControlHtml)}else{control=$j(strControlId);if(control.length!=0&&!control.get(0).wrapper){if($j(this).attr("data-hasrel")!=undefined){var relParent=control.parents("[data-rel='"+strControlId+"']").last();if(relParent.length>0){control.insertBefore(relParent)}$j("[data-rel='"+strControlId+"']").remove()}control.replaceWith(strControlHtml)}else{$j(strControlId+"_ctl").html(strControlHtml)}}});var strCommands=[];$j(xml).find("command").each(function(){strCommands.push($j(this).text())});eval(strCommands.join(""));if(qcubed.objAjaxWaitIcon){$j(qcubed.objAjaxWaitIcon).hide()}}})},initialize:function(){this.loadJavaScriptFile=function(a,b){if(a.indexOf("/")==0){a=qc.baseDir+a}else{if(a.indexOf("http")!=0){a=qc.jsAssets+"/"+a}}$j.ajax({url:a,success:b,dataType:"script",cache:true})};this.loadStyleSheetFile=function(a,b){if(a.indexOf("/")==0){a=qc.baseDir+a}else{if(a.indexOf("http")!=0){a=qc.cssAssets+"/"+a}}$j("head").append('<link rel="stylesheet" href="'+a+'" type="text/css" />')};this.wrappers=new Array()}};qcubed._objTimers=new Object();qcubed.clearTimeout=function(a){if(qcubed._objTimers[a]){clearTimeout(qcubed._objTimers[a]);qcubed._objTimers[a]=null}};qcubed.setTimeout=function(b,c,a){qcubed.clearTimeout(b);qcubed._objTimers[b]=setTimeout(c,a)};qcubed.terminateEvent=function(a){a=qcubed.handleEvent(a);if(a){if(a.preventDefault){a.preventDefault()}if(a.stopPropagation){a.stopPropagation()}a.cancelBubble=true;a.returnValue=false}return false};var qc=qcubed;qc.initialize();qc.pB=qcubed.postBack;qc.pA=qcubed.postAjax;qcubed.getControl=function(a){if(typeof(a)=="string"){return document.getElementById(a)}else{return a}};qcubed.getWrapper=function(b){var a;if(!(a=qcubed.getControl(b))){if(typeof(b)=="string"){return this.getControl(b+"_ctl")}return null}else{if(a.wrapper){return a.wrapper}}return a};qcubed.controlModifications=new Object;qcubed.javascriptStyleToQcodo=new Object;qcubed.javascriptStyleToQcodo.backgroundColor="BackColor";qcubed.javascriptStyleToQcodo.borderColor="BorderColor";qcubed.javascriptStyleToQcodo.borderStyle="BorderStyle";qcubed.javascriptStyleToQcodo.border="BorderWidth";qcubed.javascriptStyleToQcodo.height="Height";qcubed.javascriptStyleToQcodo.width="Width";qcubed.javascriptStyleToQcodo.text="Text";qcubed.javascriptWrapperStyleToQcodo=new Object;qcubed.javascriptWrapperStyleToQcodo.position="Position";qcubed.javascriptWrapperStyleToQcodo.top="Top";qcubed.javascriptWrapperStyleToQcodo.left="Left";qcubed.recordControlModification=function(c,a,b){if(!qcubed.controlModifications[c]){qcubed.controlModifications[c]=new Object}qcubed.controlModifications[c][a]=b};qcubed.registerControl=function(b){var a;a=qcubed.getControl(b);if(!a){return}var c=this.getControl(a.id+"_ctl");if(!c){c=a}else{c.control=a;a.wrapper=c;qcubed.wrappers[c.id]=c}c.updateStyle=function(f,e){var d=(this.control)?this.control:this;switch(f){case"className":d.className=e;qcubed.recordControlModification(d.id,"CssClass",e);break;case"parent":if(e){var g=qcubed.getControl(e);g.appendChild(this);qcubed.recordControlModification(d.id,"Parent",e)}else{var h=this.parentNode;h.removeChild(this);qcubed.recordControlModification(d.id,"Parent","")}break;case"displayStyle":d.style.display=e;qcubed.recordControlModification(d.id,"DisplayStyle",e);break;case"display":if(e){$j(this).show();qcubed.recordControlModification(d.id,"Display","1")}else{$j(this).hide();qcubed.recordControlModification(d.id,"Display","0")}break;case"enabled":if(e){d.disabled=false;qcubed.recordControlModification(d.id,"Enabled","1")}else{d.disabled=true;qcubed.recordControlModification(d.id,"Enabled","0")}break;case"width":case"height":d.style[f]=e;if(qcubed.javascriptStyleToQcodo[f]){qcubed.recordControlModification(d.id,qcubed.javascriptStyleToQcodo[f],e)}if(this.handle){this.updateHandle()}break;case"text":d.innerHTML=e;qcubed.recordControlModification(d.id,"Text",e);break;default:if(qcubed.javascriptWrapperStyleToQcodo[f]){this.style[f]=e;qcubed.recordControlModification(d.id,qcubed.javascriptWrapperStyleToQcodo[f],e)}else{d.style[f]=e;if(qcubed.javascriptStyleToQcodo[f]){qcubed.recordControlModification(d.id,qcubed.javascriptStyleToQcodo[f],e)}}break}};c.getAbsolutePosition=function(){var d=(this.control)?this.control:this;var e=$j(d).offset();return{x:e.left,y:e.top}};c.setAbsolutePosition=function(g,f,e){var d=this.offsetParent;while(d){g-=d.offsetLeft;f-=d.offsetTop;d=d.offsetParent}if(e){if(this.parentNode.nodeName.toLowerCase()!="form"){g=Math.max(g,0);f=Math.max(f,0);g=Math.min(g,this.offsetParent.offsetWidth-this.offsetWidth);f=Math.min(f,this.offsetParent.offsetHeight-this.offsetHeight)}}this.updateStyle("left",g+"px");this.updateStyle("top",f+"px")};c.toggleDisplay=function(d){if(d){if(d=="show"){this.updateStyle("display",true)}else{this.updateStyle("display",false)}}else{this.updateStyle("display",(this.style.display=="none")?true:false)}};c.toggleEnabled=function(e){var d=(this.control)?this.control:this;if(e){if(e=="enable"){this.updateStyle("enabled",true)}else{this.updateStyle("enabled",false)}}else{this.updateStyle("enabled",(d.disabled)?true:false)}};c.registerClickPosition=function(e){var d=(this.control)?this.control:this;var g=e.pageX-d.offsetLeft;var f=e.pageY-d.offsetTop;$j("#"+d.id+"_x").val(g);$j("#"+d.id+"_y").val(f)};if(c.control){c.focus=function(){$j(this.control).focus()}}if(c.control){c.select=function(){$j(this.control).select()}}c.blink=function(f,e){var d=(this.control)?this.control:this;$j(d).css("background-color",""+f);$j(d).animate({backgroundColor:""+e},500)}};qcubed.registerControlArray=function(b){var c=b.length;for(var a=0;a<c;a++){qcubed.registerControl(b[a])}};qc.getC=qcubed.getControl;qc.getW=qcubed.getWrapper;qc.regC=qcubed.registerControl;qc.regCA=qcubed.registerControlArray;